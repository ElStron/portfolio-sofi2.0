---
import Title from "@src/components/atoms/Title/Title";
import CardPortfolio from "../../molecules/CardPortfolio/CardPortfolio.astro";
import { skillsIconsMapped } from "@src/data/portfolioData";

import { portfolioCardsData as data } from "@src/services/getPortfolioCards";

const mainData = data.proyectosPortafolio.edges.map((item) => {
  // Procesar skills
  const skills = item.node.proyectoPortafolio.skills.map((skill) => {
    return skill.split(': ')[1].replace(/"/g, ''); // Extrae solo el valor despu√©s de ": " y remueve comillas
  });

  // Procesar skillicons
  const skillicons = item.node.proyectoPortafolio.skillicons.map((icon) => {
    return icon.split(': ')[1].replace(/"/g, '');
  });

  return {
    title: item.node.title,
    description: item.node.proyectoPortafolio.description,
    imgSrc: item.node.proyectoPortafolio.imgsrc_url.node.link,
    demoURL: item.node.uri,
    repoURL: item.node.uri,
    skills,
    skillicons,
  };
});

console.log("ü¶ù", mainData);
---
<section class="portfolio" id="portfolio">
  <Title titleDesc="Portfolio" clase="title-dark" />
  <div class="card__section">
    {mainData.slice(0, 6).map((data) => (
      <CardPortfolio
        title={data.title}
        description={data.description}
        imgSrc={data.imgSrc}
        demoURL={data.demoURL}
        repoURL={data.repoURL}
        skills={data.skills}
        skillIcon={data.skillicons} // Aseg√∫rate de que `CardPortfolio` maneje un array de iconos si es necesario
      />
    ))}
  </div>
</section>
